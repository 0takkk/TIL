### 의존성 역전
`웹 어댑터`는 `인커밍 어댑터`이다.  
**외부 요청(ex. HTTP 요청)을 받아 애플리케이션 코어를 호출**하는 역할을 한다.  
- 웹 어댑터는 애플리케이션 계층이 제공하는 인커밍 포트를 통해 코어와 통신한다.  
- 애플리케이션 서비스는 인커밍 포트를 구현하고, 웹 어댑터는 이를 호출한다.  
- `의존성 역전 원칙`이 적용된 것으로, **애플리케이션 코어가 웹 어댑터를 전혀 모른다.**  

![](https://i.imgur.com/wV1bAed.png)

웹 어댑터와 유스케이스 사이에 `포트`라는 간접 계층을 두는 이유는 뭘까?  
- 포트는 "애플리케이션이 외부 세계와 어떻게 통신할 수 있는지"에 대한 `명세`이다.  
- 포트를 통해 **외부와의 상호작용 지점을 명확히 구분**할 수 있다.  

<br>

### 웹 어댑터의 책임
`웹 어댑터`는 일반적으로 다음과 같은 일을 한다.  
1. HTTP 요청을 자바 객체로 매핑
2. 권한 검사
3. 입력 유효성 검증
4. 입력을 유스케이스의 입력 모델로 매핑
5. 유스케이스 호출
6. 유스케이스의 출력을 HTTP로 매핑
7. HTTP 응답을 반환

웹 어댑터의 `입력 유효성 검증`은 유스케이스에서 사용하는 입력 모델(`Command`)과 구조나 의미가 다를 수 있다.  
따라서, 단순한 필드 유효성 검사를 넘어 **웹 어댑터의 입력 모델을 유스케이스의 입력 모델로 변환할 수 있다는 것을 검증**해야 한다.  

`웹 어댑터`의 책임이 많아 보일 수 있다.  
하지만, 이 책임들은 애플리케이션 계층이 신경 쓰면 안되는 것들이다.  
HTTP와 관련된 것은 애플리케이션 계층으로 침투해서는 안 된다.  

<br>

### 컨트롤러 설계 전략
컨트롤러는 **가능한 한 좁게, 특정 유스케이스나 기능 단위로 분리**하는 것이 좋다.  
단일 컨트롤러에 너무 많은 책임을 몰아 넣으면, 유사한 HTTP 구조로 인해 모델이나 DTO 재사용을 촉진한다.  
따라서, 컨트롤러는 유스케이스별로 분리해야 한다.  
