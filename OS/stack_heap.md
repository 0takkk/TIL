# 만일 스택이 매우 커질 수 있다면 힙은 불필요할까?

스택과 힙 메모리는 `존재 목적` 자체가 다르다.

스택 메모리는 LIFO 구조로 함수의 지역변수, 매개변수, 반환 주소 등이 할당되고 해제된다.
반면, 힙은 동적 할당 영역으로 `new()` 등을 통해 메모리가 할당된다.

스택 메모리가 아무리 커져도 다음과 같은 힙 메모리의 특성은 대체하기 어렵다.

1. 데이터의 생명주기

- 힙 메모리는 명시적으로 해제하기 전까지 존재하여 함수 호출 범위를 넘어서는 데이터를 저장할 수 있다.
- 스택의 데이터는 함수가 종료되면 자동으로 소멸된다.

2. 동적 크기 조정

- 런타임에 크기가 결정되는 자료구조(ex. 가변 길이 배열, 동적 객체)는 힙에서 효율적으로 관리된다.

3. 데이터 공유

- 힙은 여러 함수나 스레드 간에 데이터를 공유할 수 있다.
- 멀티스레딩 환경에서 여러 스레드가 동시에 접근해야 할 데이터는 스택 구조에서 구현하기 어렵다.

4. 메모리 단편화 관리

- 힙은 메모리 할당자를 통해 파편화를 관리할 수 있다.

운영체제 관점에서 스택은 일반적으로 프로세스나 스레드별로 할당되며, 매우 큰 스택은 컨텍스트 스위칭 비용 증가와 캐시 효율성 저하를 가져올 수 있다.
